set encoding=utf-8
scriptencoding utf-8

if !filereadable($XDG_CACHE_HOME . '/vim/autoload/plug.vim')
  silent !curl -fLo $XDG_CACHE_HOME/vim/autoload/plug.vim --create-dirs 'https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
  augroup vimplug
    autocmd VimEnter * PlugInstall
  augroup END
endif

function s:ensure_dir(dir)
  if filewritable(a:dir) != 2
    call mkdir(a:dir, "p", 0700)
  endif
endfunction

call plug#begin($XDG_CACHE_HOME . '/vim/bundle')
Plug 'tpope/vim-sensible'

Plug 'ciaranm/inkpot'
Plug 'editorconfig/editorconfig-vim'
Plug 'ervandew/supertab'
Plug 'jamessan/vim-gnupg'
Plug 'junegunn/fzf' | Plug 'junegunn/fzf.vim'
Plug 'junegunn/vim-easy-align'
Plug 'scrooloose/nerdtree'
Plug 'tpope/vim-repeat'
Plug 'tpope/vim-sleuth'
Plug 'tpope/vim-surround'
Plug 'tpope/vim-unimpaired'
Plug 'vim-airline/vim-airline' | Plug 'vim-airline/vim-airline-themes'
Plug 'wincent/loupe'
Plug 'wincent/terminus'

Plug 'LaTeX-Box-Team/LaTeX-Box'
Plug 'vhda/verilog_systemverilog.vim'
Plug 'sheerun/vim-polyglot'
Plug 'sukima/xmledit'

Plug 'alx741/yesod.vim'
Plug 'pbrisbin/vim-syntax-shakespeare'

if has('neovim') || exists('*ch_close_in')
  Plug 'w0rp/ale'
endif

if has('macunix')
  Plug 'itspriddle/vim-marked'
endif
call plug#end()

colorscheme inkpot
hi Normal ctermbg=NONE

inoremap jj <Esc>
nnoremap <C-t> :Files<CR>

set linebreak showbreak=â†©
set showcmd
set wildmode=longest,full

set tabstop=2 shiftwidth=2

if exists('+breakindent')
  set breakindent breakindentopt=sbr
endif

if exists('+relativenumber')
  set relativenumber
else
  set number
endif

for s:dir in ['backup', 'swap', 'undo']
  call s:ensure_dir($XDG_CACHE_HOME . '/vim/' . s:dir)
endfor

set backupdir=.,$XDG_CACHE_HOME/vim/backup
set directory=.,$XDG_CACHE_HOME/vim/swap
if exists('+undofile')
  set undofile
  set undodir=$XDG_CACHE_HOME/vim/undo
endif

let g:airline_powerline_fonts = 1
let g:LatexBox_Folding = 1
let g:NERDTreeHijackNetrw = 1
